{"remainingRequest":"/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/node_modules/babel-loader/lib/index.js!/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/src/components/SIDflowchart/renderMessage.js","dependencies":[{"path":"/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/src/components/SIDflowchart/renderMessage.js","mtime":1655113685480},{"path":"/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/babel.config.js","mtime":1654095143863},{"path":"/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/node_modules/cache-loader/dist/cjs.js","mtime":1655376985815},{"path":"/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/node_modules/babel-loader/lib/index.js","mtime":1655376985883}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport * as d3 from 'd3';\nimport { roundTo20 } from \"../../utils/math\";\n\nfunction wrap(text, initWidth, initX, initY, messages) {\n  var width = initWidth - 30;\n  text.each(function () {\n    var text = d3.select(this),\n        word,\n        words,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1,\n        // ems\n    y = text.attr(\"y\"),\n        dy = parseFloat(text.attr(\"dy\")),\n        tspan = text.text(null).append(\"tspan\").attr(\"x\", initX - 20).attr(\"y\", y).attr(\"dy\", dy + \"em\"); //console.log(messages)\n\n    messages.forEach(function (message, index) {\n      String.prototype.insert = function (index, string) {\n        if (index > 0) {\n          return this.substring(0, index) + string + this.substr(index);\n        }\n\n        return string + this;\n      };\n\n      message = message.insert(0, \"- \");\n      words = message.split(/\\s+/).reverse();\n      var wordLength = words.length;\n\n      while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(\" \")); //console.log(words.length)\n\n        if (tspan.node().getComputedTextLength() > width || words.length === wordLength - 1 && index != 0) {\n          //alert(\"Test\")\n          line.pop();\n          tspan.text(line.join(\" \"));\n          line = [word];\n          tspan = text.append(\"tspan\").attr(\"x\", initX - 20).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n        }\n      }\n    });\n  });\n}\n\nfunction renderMessage(g, node, isSelected) {\n  if (node.messages.length === 0) {\n    return;\n  }\n\n  node.width = node.width || 100;\n  node.height = node.height || 60;\n  var borderColor = isSelected ? '#666666' : '#bbbbbb';\n\n  if (node.type == 'message') {\n    var boxWidth = 180;\n    /*g.append('path').\n      attr(\"id\", \"test\").\n      attr('stroke', \"#a3a3a3\").\n      attr('stroke-width', 1).\n      attr('fill', 'none').\n      attr('d', `M ${node.x} ${node.y} L ${node.x-(node.width/2)} ${node.y-(node.height/2)}`)*/\n\n    var rect = g.append('rect').attr('x', node.x - node.width / 2).attr('y', node.y).attr('stroke', borderColor).attr('class', 'title').style('fill', '#f1f3f4').style('stroke-width', '1px').style('width', boxWidth + 'px').attr('height', 20 + 'px');\n    g.append('svg:image').attr('x', node.x - node.width / 2 + 5).attr('y', node.y).attr('width', 15 + 'px').attr('height', 20 + 'px').attr('xlink:href', \"Message.png\"); //.attr('xlink:href', 'https://cdn.pixabay.com/photo/2016/01/10/22/51/letters-1132701_1280.png');\n\n    /*var txt = g.append('text').\n        attr('x', (node.x-(node.width/2))+25).\n        attr('y', node.y+16).\n        attr('class', 'unselectable').\n        text(() => node.name).call(wrap, someWidth);*/\n    //console.log(node.width)\n\n    var txt = g.append('text').attr('x', node.x - node.width / 2).attr('y', node.y + 10).text(node.text).attr('class', 'unselectable').attr('dy', '.71em').style('fill', 'black').call(wrap, boxWidth, node.x, node.y, node.messages);\n    var height = txt.node().getBBox().height + 10; //<-- get our height plus a margin\n\n    rect.attr('height', height + 'px'); //<-- change our rect\n  }\n}\n\nexport default renderMessage;",{"version":3,"names":["d3","roundTo20","wrap","text","initWidth","initX","initY","messages","width","each","select","word","words","line","lineNumber","lineHeight","y","attr","dy","parseFloat","tspan","append","forEach","message","index","String","prototype","insert","string","substring","substr","split","reverse","wordLength","length","pop","push","join","node","getComputedTextLength","renderMessage","g","isSelected","height","borderColor","type","boxWidth","rect","x","style","txt","call","getBBox"],"sources":["/Users/leonhanschmann/Python_projects/PASS-web-app/PASS/src/components/SIDflowchart/renderMessage.js"],"sourcesContent":["import * as d3 from 'd3';\nimport {roundTo20} from '../../utils/math';\n\nfunction wrap(text, initWidth, initX, initY, messages) {\n  let width = initWidth-30\n  text.each(function() {\n    var text = d3.select(this),\n        word,\n        words,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        y = text.attr(\"y\"),\n        dy = parseFloat(text.attr(\"dy\")),\n        tspan = text.text(null).append(\"tspan\").attr(\"x\", initX-20).attr(\"y\", y).attr(\"dy\", dy + \"em\")\n      //console.log(messages)\n\n    messages.forEach(function(message, index) {\n      String.prototype.insert = function(index, string) {\n        if (index > 0) {\n          return this.substring(0, index) + string + this.substr(index);\n        }\n        return string + this;\n      };\n      message = message.insert(0, \"- \")\n      words = message.split(/\\s+/).reverse();\n      let wordLength = words.length\n      while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n        //console.log(words.length)\n        if (tspan.node().getComputedTextLength() > width || (words.length === (wordLength-1) && index != 0)) {\n          //alert(\"Test\")\n          line.pop();\n          tspan.text(line.join(\" \"));\n          line = [word];\n          tspan = text.append(\"tspan\").attr(\"x\", initX-20).attr(\"y\",  y).attr(\"dy\", ++lineNumber * lineHeight + dy+ \"em\").text(word);\n\n        }\n      }\n      })  \n\n  });\n}\n\nfunction renderMessage(g, node, isSelected) {\n  if(node.messages.length === 0){return;}\n    node.width = node.width || 100;\n    node.height = node.height || 60;\n    let borderColor = isSelected ? '#666666' : '#bbbbbb';\n    if (node.type == 'message') {\n      var boxWidth = 180;\n      /*g.append('path').\n        attr(\"id\", \"test\").\n        attr('stroke', \"#a3a3a3\").\n        attr('stroke-width', 1).\n        attr('fill', 'none').\n        attr('d', `M ${node.x} ${node.y} L ${node.x-(node.width/2)} ${node.y-(node.height/2)}`)*/\n      var rect = g.append('rect').\n      attr('x', node.x-(node.width/2)).\n      attr('y', node.y).\n      attr('stroke', borderColor).\n      attr('class', 'title').\n      style('fill', '#f1f3f4').\n      style('stroke-width', '1px').\n      style('width', boxWidth + 'px')\n      .attr('height', 20 + 'px');\n      g.append('svg:image')\n      .attr('x', (node.x-(node.width/2))+5)\n      .attr('y', node.y)\n      .attr('width', 15 + 'px')\n      .attr('height', 20 + 'px')\n      .attr('xlink:href', \"Message.png\");\n      //.attr('xlink:href', 'https://cdn.pixabay.com/photo/2016/01/10/22/51/letters-1132701_1280.png');\n      \n      /*var txt = g.append('text').\n          attr('x', (node.x-(node.width/2))+25).\n          attr('y', node.y+16).\n          attr('class', 'unselectable').\n          text(() => node.name).call(wrap, someWidth);*/\n     \n          //console.log(node.width)\n      let txt = g.append('text').\n          attr('x', (node.x-(node.width/2))).\n          attr('y', node.y+10)\n          .text(node.text).\n          attr('class', 'unselectable')\n          .attr('dy', '.71em')\n          .style('fill', 'black')\n          .call(wrap, boxWidth, node.x, node.y, node.messages);\n  \n          let height = txt.node().getBBox().height + 10; //<-- get our height plus a margin\n          rect.attr('height', height + 'px'); //<-- change our rect\n    }\n}\nexport default renderMessage;\n\n\n\n"],"mappings":"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"}]}